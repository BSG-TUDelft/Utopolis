<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - collada</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #71D7F3;
                margin: 0px;
                overflow: hidden;
            }

            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;

            }

            a { color: skyblue }
        </style>
		<link type="text/css" rel="stylesheet" href="css/general.css"/>
		<link type="text/css" rel="stylesheet" href="css/menu.css"/>
		<link type="text/css" rel="stylesheet" href="css/menu_icons.css"/>
		<link type="text/css" rel="stylesheet" href="css/topbar.css"/>
    </head>
    <body>
        <script src="js/three.js"></script>

        <script src="js/loaders/ColladaLoader.js"></script>

        <script src="js/Detector.js"></script>
        <script src="js/libs/stats.min.js"></script>
		<script src="js/libs/jquery-1.10.2.js"  type="text/javascript"></script>
		<script src="js/ui/Menu.js" type="text/javascript"></script>
		<script src="js/ui/Topbar.js" type="text/javascript"></script>

		<script src="ModelLoader.js"></script>
		<script src="IberModelLoader.js"></script>
		<script src="ModelArray.js"></script>
        <script src="ModelWrapper.js"></script>

	<div id="left">
		<ul id="tabstrip">
		</ul>
		<ul id="structures">
		</ul>
		<div class="structures_scroll" id="structures_scroll_up"><div class="arrow"></div></div>
		<div class="structures_scroll" id="structures_scroll_down"><div class="arrow"></div></div>

	</div>
	<div id="topbar">
		<ul id="resources">

		</ul>

	</div>
	<div id="main">
	</div>
	<script type="text/javascript">

		// This should come from the server
		var menuData = {
			empires: [{
				name: "Hellenes",
				tabCss: "tab_helle"
			}, {
				name: "Romans",
				tabCss: "tab_rome",
				structures: [{
					name: "House",
					structureId: "rome_house",
					iconCss: "rome_house"
				},{
					name: "Farm",
					structureId: "rome_farm",
					iconCss: "rome_farm"
				},{
					name: "Corral",
					structureId: "rome_corral",
					iconCss: "rome_corral"
				},{
					name: "Storehouse",
					structureId: "rome_storehouse",
					iconCss: "rome_storehouse"
				},{
					name: "Barracks",
					structureId: "rome_barracks",
					iconCss: "rome_barracks"
				},{
					name: "Blacksmith",
					structureId: "rome_blacksmith",
					iconCss: "rome_blacksmith"
//				},{
//					name: "Civic center",
//					structureId: "rome_civic",
//					iconCss: "rome_civic"
				},{
					name: "Tower",
					structureId: "rome_tower",
					iconCss: "rome_tower"
				},{
					name: "Fortress",
					structureId: "rome_fortress",
					iconCss: "rome_fortress"
				},{
					name: "Temple",
					structureId: "rome_temple",
					iconCss: "rome_temple"
				}]
			}, {
				name: "Carthaginians",
				tabCss: "tab_kart",
				structures: [{
					name: "House",
					structureId: "kart_house",
					iconCss: "kart_house"
//				},{
//					name: "Farm",
//					structureId: "kart_farm",
//					iconCss: "kart_farm"
				},{
					name: "Corral",
					structureId: "kart_corral",
					iconCss: "kart_corral"
				},{
					name: "Storehouse",
					structureId: "kart_storehouse",
					iconCss: "kart_storehouse"
				},{
					name: "Barracks",
					structureId: "kart_barracks",
					iconCss: "kart_barracks"
				},{
					name: "Blacksmith",
					structureId: "kart_blacksmith",
					iconCss: "kart_blacksmith"
				},{
					name: "Civic center",
					structureId: "kart_civic",
					iconCss: "kart_civic"
				},{
					name: "Tower",
					structureId: "kart_tower",
					iconCss: "kart_tower"
				},{
					name: "Fortress",
					structureId: "kart_fortress",
					iconCss: "kart_fortress"
				},{
					name: "Temple",
					structureId: "kart_temple",
					iconCss: "kart_temple"
				}]
			}, {
				name: "Iberians",
				tabCss: "tab_iber",
				structures: [{
					name: "House",
					structureId: "iber_house",
					iconCss: "iber_house"
				},{
					name: "Farm",
					structureId: "iber_farm",
					iconCss: "iber_farm"
				},{
					name: "Corral",
					structureId: "iber_corral",
					iconCss: "iber_corral"
				},{
					name: "Storehouse",
					structureId: "iber_storehouse",
					iconCss: "iber_storehouse"
				},{
					name: "Barracks",
					structureId: "iber_barracks",
					iconCss: "iber_barracks"
				},{
					name: "Blacksmith",
					structureId: "iber_blacksmith",
					iconCss: "iber_blacksmith"
				},{
					name: "Civic center",
					structureId: "iber_civic",
					iconCss: "iber_civic"
				},{
					name: "Tower",
					structureId: "iber_tower",
					iconCss: "iber_tower"
				},{
					name: "Fortress",
					structureId: "iber_fortress",
					iconCss: "iber_fortress"
				},{
					name: "Temple",
					structureId: "iber_temple",
					iconCss: "iber_temple"
				}]
			}, {
				name: "Persians",
				tabCss: "tab_pers",
				structures: [{
					name: "House",
					structureId: "pers_house",
					iconCss: "pers_house"
				},{
					name: "Farm",
					structureId: "pers_farm",
					iconCss: "pers_farm"
				},{
					name: "Corral",
					structureId: "pers_corral",
					iconCss: "pers_corral"
				},{
					name: "Storehouse",
					structureId: "pers_storehouse",
					iconCss: "pers_storehouse"
				},{
					name: "Barracks",
					structureId: "pers_barracks",
					iconCss: "pers_barracks"
				},{
					name: "Blacksmith",
					structureId: "pers_blacksmith",
					iconCss: "pers_blacksmith"
				},{
					name: "Civic center",
					structureId: "pers_civic",
					iconCss: "pers_civic"
				},{
					name: "Tower",
					structureId: "pers_tower",
					iconCss: "pers_tower"
				},{
					name: "Fortress",
					structureId: "pers_fortress",
					iconCss: "pers_fortress"
				},{
					name: "Temple",
					structureId: "pers_temple",
					iconCss: "pers_temple"
				}]
			}, {
				name: "Mauryans",
				tabCss: "tab_maur"
			}]
		};

		var topbarData = {
			resources: [{
				resourceId: 'wood',
				name: 'Wood',
				iconCss: 'wood'
			}, {
				resourceId: 'stone',
				name: 'Stone',
				iconCss: 'stone'
			}, {
				resourceId: 'metal',
				name: 'Metal',
				iconCss: 'metal'
			}, {
				resourceId: 'food',
				name: 'Food',
				iconCss: 'food'
			}]
		};


		(function() {
			"use strict";

			var menu = new Menu(menuData);
			menu.init();

			var topbar = new Topbar(topbarData);
			topbar.init();

			// Example use:
			menu.addEventListener(Menu.structureSelected, function(e){
				console.log("You clicked on " + e.structure.structureId + ", you rascal!");
			});

			// Set values directly (the property names have to correspond those you used in topbarData ctr)
			topbar.setResourceValues({
				wood: 25,
				stone: 15,
				metal: 2,
				food: 200
			});

			// Incrementing example (client side)
			var res = {
				wood: 0,
				stone: 0,
				metal: 0,
				food: 0
			}
			setInterval(function(){
				res.wood += .75;
				res.stone += .5;
				res.metal += .25;
				res.food += 1;
				topbar.setResourceValues(res);
			}, 500)


		}());

	</script>
	<script src="main.js"></script>
	</body>

</html>
